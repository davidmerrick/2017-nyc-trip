<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <meta property="og:title" content="2017 NYC Trip Heatmap" />
    <meta property="og:description" content="Heatmap of locations of photos taken in NYC." />
    <meta property="og:image" content="https://projects.david-merrick.com/2017/nyc-trip/img/heatmap.jpg" />

    <title>2017 NYC Trip</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.41.0/mapbox-gl.js"></script>
    <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.41.0/mapbox-gl.css" rel="stylesheet" />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>


<div id='map'></div>

<script>
    $(document).ready(function() {
        $.get("mapbox_token", function (data) {
            mapboxgl.accessToken = data;
            var map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/mapbox/dark-v9',
                center: [-74.0060, 40.75],
                zoom: 11
            });

            map.on('load', function () {
                map.addSource('exif', {
                    "type": "geojson",
                    "data": "exif.geojson"
                });

                map.addLayer({
                    "id": "exif-heat",
                    "type": "heatmap",
                    "source": "exif",
                    "maxzoom": 22,
                    "paint": {
                        "heatmap-color": {
                            "stops": [
                                [0, "rgba(173,216,230,0)"], // light blue
                                [0.2, "rgb(0,255,0)"], // blue
                                [0.4, "rgb(50,205,50)"], // neon green
                                [0.6, "rgb(255,255,0)"], // yellow
                                [0.8, "rgb(255,165,0)"], // orange
                                [1.0, "rgb(255,0,0)"] // red
                            ]
                        },
                        "heatmap-radius": 20,
                        "heatmap-opacity": .75
                    }
                }, 'waterway-label');
            });
        });
    });
</script>

</body>
</html>